!function(){function e(e,t){t=t||{},this.options={openedClass:t.openedClass||"opened",openedBodyClass:t.openedBodyClass||"popup-opened",closeBtnSelector:t.closeBtnSelector||".popup__close",targetPopupId:t.targetPopupId||e.data("popup-target"),eventsNameSpace:t.eventsNameSpace||"popup",closeOnBgClick:"boolean"==typeof t.closeOnBgClick?t.closeOnBgClick:!0,bodyFixedOnDesktop:"boolean"==typeof t.bodyFixedOnDesktop?t.bodyFixedOnDesktop:!0,closeOnEsc:"boolean"==typeof t.closeOnEsc?t.closeOnEsc:!0,beforeOpen:t.beforeOpen,afterOpen:t.afterOpen,beforeClose:t.beforeClose,afterClose:t.afterClose,remote:t.remote||e.data("popup-remote")},this.$button=e,this.$popup=$('[data-popup-id="'+this.options.targetPopupId+'"]'),this.defaultEvents="click."+this.options.eventsNameSpace+" tap."+this.options.eventsNameSpace,this.remoteData=this.options.remote?$.extend(!0,this.options.remote,{url:this.options.remote.url||e.data("popup-remote")}):this.options.remote,this.activate()}var t=$(window),o=$(document),s=$("body"),n=$("html, body"),p=!1,i=!1,a=function(){return window.matchMedia("(max-width: 1199px)").matches};e.prototype.checkAndCloseAllPopups=function(){var e=s.find("[data-popup-id]"),t=e.filter("."+this.options.openedClass);if(t.length){var o=t.data("popup");this.prevPopupScrollTop=o.scrollTop,o.close(!0)}return this},e.prototype.checkAndRunCallback=function(e){return"function"==typeof e?e.call(null,this):void 0!=e&&console.warn("Callback should be a function."),this},e.prototype.open=function(e){return e&&(this.actionsWithRemoteData(e),this.registerCloseBtnClick()),this.checkAndRunCallback(this.options.beforeOpen),(this.options.bodyFixedOnDesktop||a())&&(this.scrollTop=this.prevPopupScrollTop||t.scrollTop(),this.$popup.data("popupScrollTop",this.scrollTop),s.css("top",-this.scrollTop).addClass(this.options.openedBodyClass)),this.$popup.addClass(this.options.openedClass),this.checkAndRunCallback(this.options.afterOpen),this},e.prototype.close=function(e){return this.checkAndRunCallback(this.options.beforeClose),e||(s.removeAttr("style").removeClass(this.options.openedBodyClass),n.scrollTop(this.$popup.data("popupScrollTop")),this.prevScrollTop?this.prevScrollTop=!1:null),this.$popup.removeClass(this.options.openedClass),this.checkAndRunCallback(this.options.afterClose),this},e.prototype.actionsWithRemoteData=function(e){if(e.replaces instanceof Array)for(var t=0,o=e.replaces.length;o>t;t++)$(e.replaces[t].what).replaceWith(e.replaces[t].data);if(e.append instanceof Array)for(t=0,o=e.append.length;o>t;t++)$(e.append[t].what).append(e.append[t].data);if(e.content instanceof Array)for(t=0,o=e.content.length;o>t;t++)$(e.content[t].what).html(e.content[t].data);e.js&&s.append(e.js),e.refresh&&window.location.reload(!0),e.redirect&&(window.location.href=e.redirect)},e.prototype.registerOpenOnClick=function(){var e=this;return this.$button.unbind(this.defaultEvents).on(this.defaultEvents,function(t){if(t.preventDefault(),e.checkAndCloseAllPopups(),e.remoteData){var o=e.remoteData;return $.ajax({cache:"false",method:"get",dataType:"json",url:o.url,data:o.data,beforeSend:o.onBeforeSend,complete:o.onComplete,success:e.open.bind(e),error:o.onError}),this}e.open(!1)}),this},e.prototype.registerCloseOnResize=function(){var o=this,n="resize."+this.options.eventsNameSpace;return p||(t.on(n,function(){!a()&&s.hasClass(o.options.openedBodyClass)&&e.closeAllPopups(o.options.openedClass)}),p=!0),this},e.prototype.registerCloseOnEsc=function(){var t=this,n="keyup."+this.options.eventsNameSpace;return i||(o.on(n,function(o){27==o.keyCode&&s.hasClass(t.options.openedBodyClass)&&e.closeAllPopups(t.options.openedClass)}),i=!0),this},e.prototype.registerCloseOnBgClick=function(){var e=this;return e.$popup.on(this.defaultEvents,function(t){t.target===e.$popup.get(0)&&e.close()}),this},e.prototype.registerCloseBtnClick=function(){var e=this,t=e.$popup.find(this.options.closeBtnSelector);return t.unbind&&t.on?(t.unbind(this.defaultEvents).on(this.defaultEvents,function(){e.close()}),this):(console.warn("Close button was not found"),this)},e.prototype.activate=function(){return this.$popup.data("popup")?(this.registerOpenOnClick(),this.$popup.data("popup",this),this):(this.registerCloseBtnClick(),this.$popup.data("popup",this),this.options.closeOnEsc&&this.registerCloseOnEsc(),this.options.closeOnBgClick&&this.registerCloseOnBgClick(),this.registerOpenOnClick().registerCloseOnResize(),this)},e.prototype.kill=function(){this.$button.unbind(this.defaultEvents),this.$popup.data("popup",null)},e.kill=function(e){var t=$(e).data("popup");t.kill()},e.closeAllPopups=function(e){e=e||"opened";var t=s.find("[data-popup-id]"),o=t.filter("."+e);if(o.length){var n=o.data("popup");n.close.call(n,!1)}},e.initialize=function(e,t){var o="[data-popup-target]";e=e||o;var s=e instanceof jQuery,n="string"==typeof e,p="object"==typeof e;return n||s||!p||(t=e,e=o),$(e).popup(t)},"object"==typeof module&&"object"==typeof module.exports?module.exports=e:"function"==typeof define&&define.amd?define("vintage-popup",function(){return e}):window.Popup=e,$.fn.popup=function(t){return this.each(function(){var o=$(this);new e(o,t)})}}();